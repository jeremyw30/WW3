<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Outils ‚Äî Alliance Napol√©oniens</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    #accessOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10000;
    }
    #accessBox {
      background: #1a1a1a;
      padding: 40px;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
    }
    #accessBox h2 {
      color: #fbbf24;
      margin-bottom: 20px;
    }
    #accessBox input {
      padding: 10px 15px;
      font-size: 16px;
      border: 2px solid #fbbf24;
      border-radius: 5px;
      background: #2a2a2a;
      color: white;
      width: 250px;
      margin-bottom: 15px;
    }
    #accessBox button {
      padding: 10px 30px;
      font-size: 16px;
      background: #fbbf24;
      color: #000;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }
    #accessBox button:hover {
      background: #f59e0b;
    }
    #accessError {
      color: #ef4444;
      margin-top: 10px;
      display: none;
    }
    #mainContent {
      display: none;
    }
  </style>
</head>
<body>

<div id="accessOverlay">
  <div id="accessBox">
    <h2>üîí Acc√®s Restreint</h2>
    <p style="color: #ccc; margin-bottom: 20px;">Entrez le code d'acc√®s</p>
    <input type="password" id="accessCode" placeholder="Code d'acc√®s">
    <br>
    <button onclick="checkAccess()">Valider</button>
    <p id="accessError">Code incorrect</p>
  </div>
</div>

<div id="mainContent">

<header class="topbar">
  <div class="inner">
    <a href="index.html" class="brand" style="text-decoration:none; color:inherit; display:flex; align-items:center; cursor:pointer;">
      <img src="napo.png" alt="Logo Alliance" style="height:150px; margin-right:8px">
      <span style="display:flex; align-items:center; justify-content:center; height:150px; flex:1; font-size:42px; font-weight:900; color:#fbbf24; text-shadow:2px 2px 4px rgba(0,0,0,0.5); font-family:Georgia, serif; letter-spacing:1px">Alliance Napol√©oniens</span>
    </a>
    <div class="burger-menu" id="burgerMenu">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <nav id="nav">
      <div class="dropdown">
        <div class="dropdown-toggle">üìö Documentation</div>
        <div class="dropdown-menu">
          <a class="dropdown-item" href="infanterie.html">Infanterie</a>
          <a class="dropdown-item" href="blindes.html">Blind√©s</a>
          <a class="dropdown-item" href="soutien.html">Soutien</a>
          <a class="dropdown-item" href="missiles.html">Missiles</a>
          <a class="dropdown-item" href="chasseurs.html">Chasseurs</a>
          <a class="dropdown-item" href="bombardiers.html">Bombardiers</a>
          <a class="dropdown-item" href="naval.html">Naval</a>
        </div>
      </div>
      <div class="dropdown">
        <div class="dropdown-toggle">üéì √âcole</div>
        <div class="dropdown-menu">
          <a class="dropdown-item" href="demande-prof.html">üë®‚Äçüè´ Demande de prof</a>
          <a class="dropdown-item" href="idee1.html">üí° Id√©e 1</a>
          <a class="dropdown-item" href="idee2.html">üí° Id√©e 2</a>
        </div>
      </div>
      <a class="navlink" href="tactiques.html">üéØ Tactiques</a>
      <a class="navlink" href="guide.html">üìñ Guide</a>
      <a class="navlink" href="communaute.html">üë• Communaut√©</a>
      <a class="navlink active" href="outils.html">üßÆ Outils</a>
    </nav>
  </div>
</header>

<script>
const burger = document.getElementById('burgerMenu');
const nav = document.getElementById('nav');
if (burger && nav) {
  burger.addEventListener('click', () => {
    burger.classList.toggle('active');
    nav.classList.toggle('active');
  });
}

// Dropdown menus
const dropdownToggles = document.querySelectorAll('.dropdown-toggle');
dropdownToggles.forEach(toggle => {
  toggle.addEventListener('click', (e) => {
    e.stopPropagation();
    const menu = toggle.nextElementSibling;
    document.querySelectorAll('.dropdown-menu').forEach(m => {
      if (m !== menu) m.classList.remove('show');
    });
    menu.classList.toggle('show');
  });
});
document.addEventListener('click', () => {
  document.querySelectorAll('.dropdown-menu').forEach(menu => {
    menu.classList.remove('show');
  });
});
</script>

<main class="container">
  <section class="hero">
    <div class="pad">
      <h1 class="h-title">üßÆ Calculateur de Combat</h1>
      <p class="h-sub">Simulez des batailles entre unit√©s et estimez les r√©sultats</p>
    </div>
  </section>

  <section style="margin-top:20px; width: 100vw; margin-left: calc(-50vw + 50%); padding: 0 20px;">
    <div id="simulator-container" style="
      width: 100%;
      max-width: 1800px;
      margin: 0 auto;
      min-height: 1550px;
      background: #f5f5dc;
      border: 2px solid var(--brand);
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    ">
      
      <!-- Zone de design du simulateur -->
      <div style="display: flex; flex-direction: column; gap: 15px; min-height: 1450px;">
        <!-- Rang√©e du haut - 6 colonnes -->
        <div style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 15px; height: 550px;">
          <div style="border: 2px solid #e5e7eb; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; flex-direction: column; justify-content: space-between;">
            <div style="display: flex; flex-direction: column; gap: 15px;">
              <label style="color: #374151; font-weight: 600; font-size: 14px; text-align: center; width: 100%; line-height: 1.4;">Nombre d'unit√©s dans le stack</label>
              <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: 12px;">
                <input type="number" id="nbUnites" min="1" max="100" value="10" 
                       style="width: 90%; height: 42px; padding: 0 12px; border: 2px solid #d1d5db; border-radius: 8px; text-align: center; font-size: 16px; font-weight: 600; box-sizing: border-box;" 
                       oninput="updateEfficiency()">
                <div id="efficacite" style="color: #16a34a; font-weight: 600; font-size: 15px; padding: 10px 12px; background: #f0fdf4; border-radius: 6px; width: 90%; text-align: center; box-sizing: border-box; line-height: 1.4;">
                  Efficacit√©: 100%
                </div>
              </div>
            </div>
            <div style="display: flex; flex-direction: column; gap: 10px; align-items: center;">
              <div id="messageDiv1" style="min-height: 20px; color: #6b7280; font-size: 12px; text-align: center; width: 90%; line-height: 1.3;"></div>
              <button onclick="validerDiv1()" style="padding: 0; height: 42px; background: #6b7280; color: white; border: none; border-radius: 8px; font-weight: 600; font-size: 14px; cursor: pointer; transition: background 0.2s; width: 90%;">
                ‚úì Valider
              </button>
              <strong style="color: #6b7280; text-align: center; font-size: 11px;">Div 1</strong>
            </div>
          </div>
          <div style="border: 2px solid #e5e7eb; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; flex-direction: column; justify-content: space-between;">
            <div style="display: flex; flex-direction: column; gap: 15px;">
              <label style="color: #374151; font-weight: 600; font-size: 14px; text-align: center; width: 100%; line-height: 1.4;">Combien d'unit√©s diff√©rentes ?</label>
              <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
                <input type="number" id="nbUnitesDifferentes" min="1" max="100" value="1" 
                       style="width: 90%; height: 42px; padding: 0 12px; border: 2px solid #d1d5db; border-radius: 8px; text-align: center; font-size: 16px; font-weight: 600; box-sizing: border-box;">
              </div>
            </div>
            <div style="display: flex; flex-direction: column; gap: 10px; align-items: center;">
              <div id="messageDiv2" style="min-height: 20px; color: #6b7280; font-size: 12px; text-align: center; width: 90%; line-height: 1.3;"></div>
              <button onclick="validerDiv2()" style="padding: 0; height: 42px; background: #6b7280; color: white; border: none; border-radius: 8px; font-weight: 600; font-size: 14px; cursor: pointer; transition: background 0.2s; width: 90%;">
                ‚úì Valider
              </button>
              <strong style="color: #6b7280; text-align: center; font-size: 11px;">Div 2</strong>
            </div>
          </div>
          <div style="border: 2px solid #e5e7eb; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; flex-direction: column; justify-content: space-between;">
            <div id="div3Content" style="flex: 1; display: flex; flex-direction: column; gap: 12px; overflow-y: auto; padding: 5px;">
              <p style="color: #9ca3af; font-size: 13px; text-align: center; line-height: 1.4;">Validez d'abord la Div 2</p>
            </div>
            <strong style="color: #6b7280; text-align: center; font-size: 11px; margin-top: 10px;">Div 3</strong>
          </div>
          <div style="border: 2px solid #e5e7eb; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; flex-direction: column; justify-content: space-between;">
            <div id="div4Content" style="flex: 1; display: flex; flex-direction: column; gap: 12px; overflow-y: auto; padding: 5px;">
              <p style="color: #9ca3af; font-size: 13px; text-align: center; line-height: 1.4;">Validez d'abord la Div 3</p>
            </div>
            <strong style="color: #6b7280; text-align: center; font-size: 11px; margin-top: 10px;">Div 4</strong>
          </div>
          <div style="border: 2px solid #e5e7eb; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; flex-direction: column; justify-content: space-between;">
            <div id="div5Content" style="flex: 1; display: flex; flex-direction: column; gap: 12px; overflow-y: auto; padding: 5px;">
              <p style="color: #9ca3af; font-size: 13px; text-align: center; line-height: 1.4;">Validez d'abord la Div 4</p>
            </div>
            <strong style="color: #6b7280; text-align: center; font-size: 11px; margin-top: 10px;">Div 5</strong>
          </div>
          <div style="border: 2px solid #e5e7eb; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; flex-direction: column; justify-content: space-between;">
            <div id="div6Content" style="flex: 1; display: flex; flex-direction: column; gap: 12px; overflow-y: auto; padding: 5px;">
              <p style="color: #9ca3af; font-size: 13px; text-align: center; line-height: 1.4;">Validez d'abord la Div 5</p>
            </div>
            <strong style="color: #6b7280; text-align: center; font-size: 11px; margin-top: 10px;">Div 6</strong>
          </div>
        </div>
        
        <!-- Rang√©e du bas - 6 colonnes -->
        <div style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 15px; height: 550px;">
          <div style="border: 2px solid #e5e7eb; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; flex-direction: column; justify-content: space-between;">
            <div id="div7Content" style="flex: 1; display: flex; flex-direction: column; gap: 12px; overflow-y: auto; padding: 5px;">
              <p style="color: #9ca3af; font-size: 13px; text-align: center; line-height: 1.4;">En attente</p>
            </div>
            <strong style="color: #6b7280; text-align: center; font-size: 11px; margin-top: 10px;">Div 7</strong>
          </div>
          <div style="border: 2px solid #e5e7eb; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; flex-direction: column; justify-content: flex-end;"><strong style="color: #6b7280; text-align: center; font-size: 11px;">Div 8</strong></div>
          <div style="border: 2px solid #e5e7eb; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; flex-direction: column; justify-content: flex-end;"><strong style="color: #6b7280; text-align: center; font-size: 11px;">Div 9</strong></div>
          <div style="border: 2px solid #e5e7eb; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; flex-direction: column; justify-content: flex-end;"><strong style="color: #6b7280; text-align: center; font-size: 11px;">Div 10</strong></div>
          <div style="border: 2px solid #e5e7eb; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; flex-direction: column; justify-content: flex-end;"><strong style="color: #6b7280; text-align: center; font-size: 11px;">Div 11</strong></div>
          <div style="border: 2px solid #e5e7eb; padding: 20px; background: white; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; flex-direction: column; justify-content: flex-end;"><strong style="color: #6b7280; text-align: center; font-size: 11px;">Div 12</strong></div>
        </div>
      </div>
      
    </div>
  </section>

  <footer class="main-footer">
    <div class="footer-content">
      <div class="footer-col">
        <h3>√Ä propos</h3>
        <p class="footer-text">
          Alliance Napol√©onienne sur Conflict of Nations WW3. Jouable sur mobile, tablette et PC. 
          84 membres actifs sur Discord. Rejoignez-nous pour lancer des parties entre membres !
        </p>
      </div>
      
      <div class="footer-col">
        <h3>Navigation</h3>
        <ul class="footer-links">
          <li><a href="index.html">Accueil</a></li>
          <li><a href="infanterie.html">ü™ñ Infanterie</a></li>
          <li><a href="blindes.html">üõ°Ô∏è Blind√©s</a></li>
          <li><a href="soutien.html">üí£ Soutien</a></li>
          <li><a href="missiles.html">üöÄ Missiles</a></li>
          <li><a href="chasseurs.html">‚úàÔ∏è Chasseurs</a></li>
          <li><a href="bombardiers.html">üõ©Ô∏è Bombardiers</a></li>
          <li><a href="naval.html">‚öì Naval</a></li>
        </ul>
      </div>
      
      <div class="footer-col">
        <h3>Communaut√©</h3>
        <ul class="footer-links">
          <li><a href="https://discord.gg/z99qUe52PN" target="_blank">üí¨ Discord</a></li>
          <li><a href="#">üìß Contact (lien √† ajouter)</a></li>
          <li><a href="login.html">üîê Connexion Admin</a></li>
        </ul>
      </div>
      
      <div class="footer-col">
        <h3>Informations</h3>
        <ul class="footer-links">
          <li>üìÖ Derni√®re MAJ : D√©c. 2025</li>
          <li>üéÆ Jeu : Conflict of Nations WW3</li>
          <li>‚öîÔ∏è Alliance : Les Napol√©oniens</li>
        </ul>
      </div>
    </div>
    
    <div class="footer-bottom">
      ¬© Alliance Napol√©oniens ‚Äî d√©velopp√© par Jerem32 & d√©ploy√© par Cloudflare Pages
      <span style="margin-left: 20px">|</span>
      <a href="admin.html" style="margin-left: 20px; color: var(--brand)">üîê Admin</a>
      <span style="margin-left: 10px">|</span>
      <a href="#" id="openAdminModal" style="margin-left: 10px; color: var(--brand)">üë• √âquipe d'admin</a>
    </div>
  </footer>

  <div id="recapModal" class="modal">
    <div class="modal-content" style="max-width: 1400px; max-height: 90vh; overflow-y: auto; background: #2c3e50; padding: 0;">
      <span class="modal-close" onclick="document.getElementById('recapModal').style.display='none'" style="color: #ecf0f1; position: absolute; right: 15px; top: 10px; z-index: 10;">&times;</span>
      <div id="recapModalContent"></div>
    </div>
  </div>

  <div id="adminModal" class="modal">
    <div class="modal-content">
      <span class="modal-close">&times;</span>
      <h2 style="color: var(--brand); margin-bottom: 20px;">üë• Administrateurs</h2>
      <ul style="list-style: none; padding: 0;">
        <li style="padding: 15px; background: var(--panel2); margin-bottom: 10px; border-radius: 8px; border-left: 4px solid var(--brand);">
          <strong style="color: var(--brand)">1.</strong> YtbCrocomc
        </li>
        <li style="padding: 15px; background: var(--panel2); margin-bottom: 10px; border-radius: 8px; border-left: 4px solid var(--brand);">
          <strong style="color: var(--brand)">2.</strong> nicotena
        </li>
        <li style="padding: 15px; background: var(--panel2); margin-bottom: 10px; border-radius: 8px; border-left: 4px solid var(--brand);">
          <strong style="color: var(--brand)">3.</strong> PUFRUH
        </li>
      </ul>
      <a href="login.html" style="display: block; margin-top: 20px; padding: 12px; background: var(--brand); color: var(--bg); text-align: center; border-radius: 8px; text-decoration: none; font-weight: 600;">üîê Connexion Admin</a>
    </div>
  </div>

  <style>
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.8);
      animation: fadeIn 0.3s;
    }

    .modal-content {
      background-color: var(--panel);
      margin: 10% auto;
      padding: 30px;
      border: 1px solid var(--line);
      border-radius: 12px;
      width: 90%;
      max-width: 500px;
      position: relative;
      animation: slideDown 0.3s;
    }

    .modal-close {
      color: var(--muted);
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      transition: color 0.2s;
    }

    .modal-close:hover {
      color: var(--brand);
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideDown {
      from { transform: translateY(-50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
  </style>
</main>
</div>

<script>
  // Donn√©es du Google Sheet
  let unitsData = [];
  const SHEET_API_URL = 'https://script.google.com/macros/s/AKfycbzVig7wZfe5NLUj_Yk97bWYfLgeVlpCGN3D-4KGdqV8d2jX1nn3DZT1pyjx56oQ2JG3/exec';

  // Variables globales pour stocker les valeurs valid√©es
  let stackSize = 10;
  let stackEfficiency = 100;
  let nbUnitesDifferentes = 1;
  let unitesSelectionnees = [];
  let quantitesParType = [];
  let niveauxRecherche = [];

  // Charger les donn√©es au d√©marrage
  fetch(SHEET_API_URL)
    .then(response => response.json())
    .then(data => {
      console.log('Donn√©es charg√©es depuis Google Sheet:', data);
      // Filtrer seulement les lignes o√π "Unit√©" = "Unit√©" (en-t√™tes)
      unitsData = data.filter(row => row["Unit√©"] && row["Unit√©"] !== "Unit√©");
      console.log('Unit√©s filtr√©es:', unitsData);
    })
    .catch(error => {
      console.error('Erreur chargement donn√©es:', error);
    });

  // DIV 1 : Calcul de l'efficacit√© selon le nombre d'unit√©s
  function updateEfficiency() {
    const nbUnites = parseInt(document.getElementById('nbUnites').value) || 1;
    
    // Formule temporaire (√† affiner plus tard)
    // 10 unit√©s = 100%, chaque unit√© suppl√©mentaire = -3%
    let efficiency = 100;
    if (nbUnites <= 10) {
      efficiency = 100;
    } else {
      efficiency = 100 - ((nbUnites - 10) * 3);
      if (efficiency < 0) efficiency = 0;
    }
    
    document.getElementById('efficacite').textContent = `Efficacit√©: ${efficiency}%`;
    
    // Changer la couleur selon l'efficacit√©
    const effDiv = document.getElementById('efficacite');
    if (efficiency >= 90) {
      effDiv.style.color = '#16a34a'; // Vert
    } else if (efficiency >= 70) {
      effDiv.style.color = '#d97706'; // Orange
    } else {
      effDiv.style.color = '#dc2626'; // Rouge
    }
  }

  function validerDiv1() {
    stackSize = parseInt(document.getElementById('nbUnites').value) || 10;
    const effText = document.getElementById('efficacite').textContent;
    stackEfficiency = parseInt(effText.match(/\d+/)[0]);
    
    const btn = document.querySelector('[onclick="validerDiv1()"]');
    const msg = document.getElementById('messageDiv1');
    
    btn.style.background = '#16a34a';
    btn.textContent = '‚úì Valid√©';
    msg.style.color = '#16a34a';
    msg.textContent = `‚úì ${stackSize} unit√©s √† ${stackEfficiency}%`;
    
    console.log('Div 1 valid√©e:', { stackSize, stackEfficiency });
  }

  // DIV 2 : Nombre d'unit√©s diff√©rentes
  function validerDiv2() {
    const input = parseInt(document.getElementById('nbUnitesDifferentes').value) || 1;
    const btn = document.querySelector('[onclick="validerDiv2()"]');
    const msg = document.getElementById('messageDiv2');
    
    // V√©rification : ne peut pas d√©passer le nombre total d'unit√©s
    if (input > stackSize) {
      btn.style.background = '#dc2626';
      btn.textContent = '‚úó Erreur';
      msg.style.color = '#dc2626';
      msg.textContent = `‚úó Maximum ${stackSize} types`;
      return;
    }
    
    nbUnitesDifferentes = input;
    
    btn.style.background = '#16a34a';
    btn.textContent = '‚úì Valid√©';
    msg.style.color = '#16a34a';
    msg.textContent = `‚úì ${nbUnitesDifferentes} type${nbUnitesDifferentes > 1 ? 's' : ''} diff√©rent${nbUnitesDifferentes > 1 ? 's' : ''}`;
    
    console.log('Div 2 valid√©e:', { nbUnitesDifferentes });
    
    // G√©n√©rer les menus d√©roulants dans la Div 3
    genererMenusDiv3();
  }

  // DIV 3 : G√©n√©ration dynamique des menus d√©roulants
  function genererMenusDiv3() {
    const container = document.getElementById('div3Content');
    
    if (unitsData.length === 0) {
      container.innerHTML = '<p style="color: #dc2626; font-weight: bold;">‚ö†Ô∏è Donn√©es non charg√©es. Rechargez la page.</p>';
      return;
    }
    
    let html = '<label style="color: #374151; font-weight: 600; font-size: 14px; margin-bottom: 12px; text-align: center; width: 100%; display: block; line-height: 1.4;">S√©lectionnez vos unit√©s</label>';
    html += '<div style="max-height: 380px; overflow-y: auto; width: 100%; padding-right: 5px;">';
    
    for (let i = 1; i <= nbUnitesDifferentes; i++) {
      const lettre = String.fromCharCode(64 + i); // A=65, B=66, etc.
      html += `
        <div style="width: 100%; margin-bottom: 10px; padding: 0 5%;">
          <label style="color: #111827; font-size: 13px; font-weight: 600; text-align: left; display: block; margin-bottom: 5px;">Type ${lettre}</label>
          <select id="unite${i}" style="width: 100%; height: 40px; padding: 0 12px; border: 1px solid #9ca3af; border-radius: 6px; font-size: 13px; color: #374151; background: white; box-sizing: border-box;">
            <option value="">S√©lectionner une unit√©</option>
          </select>
        </div>
      `;
    }
    
    html += '</div>';
    html += `
      <div style="display: flex; flex-direction: column; gap: 10px; align-items: center; margin-top: 10px;">
        <div id="messageDiv3" style="min-height: 20px; color: #6b7280; font-size: 12px; text-align: center; width: 90%; line-height: 1.3;"></div>
        <button onclick="validerDiv3()" style="padding: 0; height: 42px; background: #6b7280; color: white; border: none; border-radius: 8px; font-weight: 600; font-size: 14px; cursor: pointer; transition: background 0.2s; width: 90%;">
          ‚úì Valider
        </button>
      </div>
    `;
    
    container.innerHTML = html;
    
    // Remplir chaque menu avec les unit√©s group√©es par cat√©gorie
    const unitesParCategorie = {};
    const nomsVus = new Set();
    
    unitsData.forEach(unit => {
      const nom = unit["Unit√©"] || unit.nom || 'Unit√© inconnue';
      const categorie = unit["Categorie"] || 'Autre';
      
      if (!nomsVus.has(nom)) {
        nomsVus.add(nom);
        if (!unitesParCategorie[categorie]) {
          unitesParCategorie[categorie] = [];
        }
        unitesParCategorie[categorie].push(nom);
      }
    });
    
    for (let i = 1; i <= nbUnitesDifferentes; i++) {
      const select = document.getElementById(`unite${i}`);
      
      // Ordre personnalis√© des cat√©gories
      const ordreCategories = ['Infanterie', 'Blind√©s', 'Soutien', 'Air', 'Naval', 'Missiles'];
      
      // Ajouter les unit√©s group√©es par cat√©gorie dans l'ordre d√©fini
      ordreCategories.forEach(categorie => {
        if (unitesParCategorie[categorie]) {
          const optgroup = document.createElement('optgroup');
          optgroup.label = '‚îÅ‚îÅ ' + categorie.toUpperCase() + ' ‚îÅ‚îÅ';
          optgroup.style.fontWeight = '700';
          optgroup.style.color = '#1f2937';
          optgroup.style.fontSize = '12px';
          optgroup.style.fontStyle = 'normal';
          
          unitesParCategorie[categorie].forEach(nom => {
            const option = document.createElement('option');
            option.value = nom;
            option.textContent = '   ' + nom;
            option.style.fontSize = '13px';
            optgroup.appendChild(option);
          });
          
          select.appendChild(optgroup);
        }
      });
    }
  }

  function validerDiv3() {
    unitesSelectionnees = [];
    let erreur = false;
    const msg = document.getElementById('messageDiv3');
    
    for (let i = 1; i <= nbUnitesDifferentes; i++) {
      const select = document.getElementById(`unite${i}`);
      const valeur = select.value;
      
      if (!valeur) {
        const btn = document.querySelector('[onclick="validerDiv3()"]');
        btn.style.background = '#dc2626';
        btn.textContent = '‚úó Erreur';
        msg.style.color = '#dc2626';
        msg.textContent = `‚úó S√©lectionnez le Type ${i}`;
        erreur = true;
        break;
      }
      
      unitesSelectionnees.push(valeur);
    }
    
    if (!erreur) {
      const btn = document.querySelector('[onclick="validerDiv3()"]');
      btn.style.background = '#16a34a';
      btn.textContent = '‚úì Valid√©';
      msg.style.color = '#16a34a';
      msg.textContent = `‚úì ${nbUnitesDifferentes} unit√©${nbUnitesDifferentes > 1 ? 's' : ''} s√©lectionn√©e${nbUnitesDifferentes > 1 ? 's' : ''}`;
      
      console.log('Div 3 valid√©e:', { unitesSelectionnees });
      
      // G√©n√©rer la Div 4 pour les quantit√©s
      genererDiv4();
    }
  }

  // DIV 4 : Quantit√©s par type d'unit√©
  function genererDiv4() {
    const container = document.getElementById('div4Content');
    
    let html = '<label style="color: #374151; font-weight: 600; font-size: 14px; margin-bottom: 12px; text-align: center; width: 100%; display: block; line-height: 1.4;">Quantit√©s par type</label>';
    html += '<div style="max-height: 380px; overflow-y: auto; width: 100%; padding-right: 5px;">';
    
    for (let i = 0; i < unitesSelectionnees.length; i++) {
      const lettre = String.fromCharCode(65 + i);
      const nomUnite = unitesSelectionnees[i];
      html += `
        <div style="width: 100%; margin-bottom: 12px; padding: 0 5%;">
          <label style="color: #374151; font-size: 12px; font-weight: 600; text-align: center; display: block; margin-bottom: 4px;">Type ${lettre}: ${nomUnite}</label>
          <input type="number" id="quantite${i}" min="1" max="${stackSize}" value="1" 
                 style="width: 100%; height: 38px; padding: 0 10px; border: 2px solid #d1d5db; border-radius: 8px; text-align: center; font-size: 14px; font-weight: 600; box-sizing: border-box;">
        </div>
      `;
    }
    
    html += '</div>';
    html += `
      <div style="display: flex; flex-direction: column; gap: 10px; align-items: center; margin-top: 10px;">
        <div id="messageDiv4" style="min-height: 20px; color: #6b7280; font-size: 12px; text-align: center; width: 90%; line-height: 1.3;"></div>
        <button onclick="validerDiv4()" style="padding: 0; height: 42px; background: #6b7280; color: white; border: none; border-radius: 8px; font-weight: 600; font-size: 14px; cursor: pointer; transition: background 0.2s; width: 90%;">
          ‚úì Valider
        </button>
      </div>
    `;
    
    container.innerHTML = html;
  }

  function validerDiv4() {
    quantitesParType = [];
    let somme = 0;
    const msg = document.getElementById('messageDiv4');
    const btn = document.querySelector('[onclick="validerDiv4()"]');
    
    for (let i = 0; i < unitesSelectionnees.length; i++) {
      const input = document.getElementById(`quantite${i}`);
      const qte = parseInt(input.value) || 0;
      quantitesParType.push(qte);
      somme += qte;
    }
    
    if (somme !== stackSize) {
      btn.style.background = '#dc2626';
      btn.textContent = '‚úó Erreur';
      msg.style.color = '#dc2626';
      msg.textContent = `‚úó Total ${somme}/${stackSize} unit√©s`;
      return;
    }
    
    btn.style.background = '#16a34a';
    btn.textContent = '‚úì Valid√©';
    msg.style.color = '#16a34a';
    msg.textContent = `‚úì R√©partition valid√©e (${stackSize} unit√©s)`;
    
    console.log('Div 4 valid√©e:', { quantitesParType, somme });
    
    // G√©n√©rer la Div 5 pour les niveaux de recherche
    genererDiv5();
  }

  // DIV 5 : Niveaux de recherche par type d'unit√©
  function genererDiv5() {
    const container = document.getElementById('div5Content');
    
    let html = '<label style="color: #374151; font-weight: 600; font-size: 14px; margin-bottom: 12px; text-align: center; width: 100%; display: block; line-height: 1.4;">Niveaux de recherche</label>';
    html += '<div style="max-height: 380px; overflow-y: auto; width: 100%; padding-right: 5px;">';
    
    for (let i = 0; i < unitesSelectionnees.length; i++) {
      const lettre = String.fromCharCode(65 + i);
      const nomUnite = unitesSelectionnees[i];
      
      // R√©cup√©rer les stats de cette unit√© depuis unitsData
      const statsUnite = unitsData.filter(u => u["Unit√©"] === nomUnite);
      console.log(`Stats pour ${nomUnite}:`, statsUnite);
      
      html += `
        <div style="width: 100%; margin-bottom: 12px; padding: 0 5%;">
          <label style="color: #374151; font-size: 12px; font-weight: 600; text-align: center; display: block; margin-bottom: 4px;">Type ${lettre}: ${nomUnite}</label>
          <select id="niveau${i}" style="width: 100%; height: 38px; padding: 0 10px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 13px; box-sizing: border-box;">
            <option value="">-- S√©lectionner niveau --</option>`;
      
      // Si on a des stats, les afficher
      if (statsUnite.length > 0) {
        // G√©n√©rer niveaux 1 √† 7 avec les stats correspondantes
        for (let niv = 1; niv <= 7; niv++) {
          const statNiveau = statsUnite.find(s => {
            const lvlStr = (s["level 1√†10 ATK"] || '').toString();
            return lvlStr.includes(`level ${niv}`) || lvlStr === `level ${niv}`;
          });
          
          if (statNiveau) {
            const atkInf = statNiveau["atk inf"] || '-';
            const atkBlinde = statNiveau["atk blinde"] || '-';
            html += `<option value="${niv}">Niveau ${niv} (ATK inf: ${atkInf}, blind√©: ${atkBlinde})</option>`;
          }
        }
      } else {
        // Pas de stats trouv√©es, afficher niveaux basiques
        for (let niv = 1; niv <= 6; niv++) {
          html += `<option value="${niv}">Niveau ${niv}</option>`;
        }
      }
      
      html += `
          </select>
        </div>
      `;
    }
    
    html += '</div>';
    html += `
      <div style="display: flex; flex-direction: column; gap: 10px; align-items: center; margin-top: 10px;">
        <div id="messageDiv5" style="min-height: 20px; color: #6b7280; font-size: 12px; text-align: center; width: 90%; line-height: 1.3;"></div>
        <button onclick="validerDiv5()" style="padding: 0; height: 42px; background: #6b7280; color: white; border: none; border-radius: 8px; font-weight: 600; font-size: 14px; cursor: pointer; transition: background 0.2s; width: 90%;">
          ‚úì Valider
        </button>
      </div>
    `;
    
    container.innerHTML = html;
  }

  function validerDiv5() {
    niveauxRecherche = [];
    let erreur = false;
    const msg = document.getElementById('messageDiv5');
    const btn = document.querySelector('[onclick="validerDiv5()"]');
    
    for (let i = 0; i < unitesSelectionnees.length; i++) {
      const select = document.getElementById(`niveau${i}`);
      const niveau = select.value;
      
      if (!niveau) {
        const lettre = String.fromCharCode(65 + i);
        btn.style.background = '#dc2626';
        btn.textContent = '‚úó Erreur';
        msg.style.color = '#dc2626';
        msg.textContent = `‚úó S√©lectionnez le niveau du Type ${lettre}`;
        erreur = true;
        break;
      }
      
      niveauxRecherche.push(parseInt(niveau));
    }
    
    if (!erreur) {
      btn.style.background = '#16a34a';
      btn.textContent = '‚úì Valid√©';
      msg.style.color = '#16a34a';
      msg.textContent = `‚úì ${niveauxRecherche.length} niveau${niveauxRecherche.length > 1 ? 'x' : ''} d√©fini${niveauxRecherche.length > 1 ? 's' : ''}`;
      
      console.log('Div 5 valid√©e:', { niveauxRecherche });
      
      // G√©n√©rer la Div 6 avec le r√©capitulatif
      genererDiv6();
    }
  }

  // DIV 6 : Tableau r√©capitulatif
  function genererDiv6() {
    const container = document.getElementById('div6Content');
    
    let html = '<label style="color: #374151; font-weight: 600; font-size: 14px; margin-bottom: 12px; text-align: center; width: 100%; display: block; line-height: 1.4;">‚ú® R√©capitulatif</label>';
    html += '<div style="max-height: 460px; overflow-y: auto; width: 100%; padding: 0 5%;">';
    
    // Info g√©n√©rales
    html += `
      <div style="background: #f0fdf4; padding: 12px; border-radius: 6px; margin-bottom: 10px;">
        <div style="font-size: 12px; color: #374151; margin-bottom: 4px;"><strong>Stack:</strong> ${stackSize} unit√©s</div>
        <div style="font-size: 12px; color: #374151;"><strong>Efficacit√©:</strong> ${stackEfficiency}%</div>
      </div>
    `;
    
    // Tableau des unit√©s
    html += '<div style="font-size: 11px; color: #374151; font-weight: 600; margin-bottom: 8px; text-align: center;">D√©tails des unit√©s</div>';
    
    for (let i = 0; i < unitesSelectionnees.length; i++) {
      const lettre = String.fromCharCode(65 + i);
      const nomUnite = unitesSelectionnees[i];
      const quantite = quantitesParType[i];
      const niveau = niveauxRecherche[i];
      
      // R√©cup√©rer les stats de cette unit√© au niveau s√©lectionn√©
      const statUnite = unitsData.find(u => {
        const lvlStr = (u["level 1√†10 ATK"] || '').toString();
        return u["Unit√©"] === nomUnite && (lvlStr.includes(`level ${niveau}`) || lvlStr === `level ${niveau}`);
      });
      
      console.log(`Stats pour ${nomUnite} niveau ${niveau}:`, statUnite);
      
      let statsHTML = '';
      if (statUnite) {
        // R√©cup√©rer les valeurs unitaires
        const atkInfUnit = parseFloat(statUnite["atk inf"]) || 0;
        const atkBlindeUnit = parseFloat(statUnite["atk blinde"]) || 0;
        const defInfUnit = parseFloat(statUnite["def inf"]) || 0;
        const defBlindeUnit = parseFloat(statUnite["def blinde"]) || 0;
        
        // Calculer les totaux
        const atkInfTotal = (atkInfUnit * quantite).toFixed(1);
        const atkBlindeTotal = (atkBlindeUnit * quantite).toFixed(1);
        const defInfTotal = (defInfUnit * quantite).toFixed(1);
        const defBlindeTotal = (defBlindeUnit * quantite).toFixed(1);
        
        statsHTML = `
          <div style="font-size: 10px; color: #6b7280; margin-top: 6px; padding-top: 6px; border-top: 1px solid #f3f4f6;">
            <div style="margin-bottom: 2px;"><strong>ATK:</strong> Inf ${atkInfTotal} (${atkInfUnit}√ó${quantite}) | Blind√© ${atkBlindeTotal} (${atkBlindeUnit}√ó${quantite})</div>
            <div><strong>DEF:</strong> Inf ${defInfTotal} (${defInfUnit}√ó${quantite}) | Blind√© ${defBlindeTotal} (${defBlindeUnit}√ó${quantite})</div>
          </div>
        `;
      } else {
        statsHTML = '<div style="font-size: 10px; color: #dc2626; margin-top: 4px;">Stats non trouv√©es</div>';
      }
      
      html += `
        <div style="background: white; border: 1px solid #e5e7eb; padding: 8px; border-radius: 4px; margin-bottom: 6px;">
          <div style="font-size: 11px; color: #6b7280; font-weight: 600; margin-bottom: 4px;">Type ${lettre}</div>
          <div style="font-size: 11px; color: #374151;">${nomUnite}</div>
          <div style="font-size: 10px; color: #6b7280; margin-top: 4px;">
            <span style="margin-right: 8px;">‚óè Qnt√©: ${quantite}</span>
            <span>‚óè Niv: ${niveau}</span>
          </div>
          ${statsHTML}
        </div>
      `;
    }
    
    html += '</div>';
    
    // Bouton pour ouvrir le modal r√©capitulatif
    html += `
      <div style="margin-top: 15px; text-align: center;">
        <button onclick="ouvrirModalRecap()" style="padding: 12px 24px; background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); color: #000; border: none; border-radius: 8px; font-weight: 700; font-size: 14px; cursor: pointer; box-shadow: 0 4px 12px rgba(251, 191, 36, 0.4); transition: transform 0.2s;">
          üìä Tableau R√©capitulatif Complet
        </button>
      </div>
    `;
    
    container.innerHTML = html;
  }

  // Fonction pour ouvrir le modal r√©capitulatif
  function ouvrirModalRecap() {
    const modal = document.getElementById('recapModal');
    const container = document.getElementById('recapModalContent');
    
    if (!modal || !container) return;
    
    // G√©n√©rer le tableau style "Propri√©t√©s de combat"
    let html = '';
    
    // En-t√™te du tableau
    html += '<div style="background: linear-gradient(135deg, #2c3e50 0%, #1a252f 100%); padding: 15px; border-radius: 8px 8px 0 0; border-bottom: 3px solid #34495e;">';
    html += '<h3 style="color: #ecf0f1; margin: 0; font-size: 16px; text-align: center; letter-spacing: 1px;">PROPRI√âT√âS DE COMBAT</h3>';
    html += '</div>';
    
    // Tableau
    html += '<div style="overflow-x: auto; background: #2c3e50;">';
    html += '<table style="width: 100%; border-collapse: collapse; font-size: 12px;">';
    
    // D√©finir les cat√©gories de colonnes
    const categories = [
      { label: 'Inf', keyATK: 'atk inf', keyDEF: 'def inf', icon: 'ü™ñ' },
      { label: 'Blind√©', keyATK: 'atk blinde', keyDEF: 'def blinde', icon: 'üõ°Ô∏è' },
      { label: 'Avion', keyATK: 'atk avion', keyDEF: 'def avion', icon: '‚úàÔ∏è' },
      { label: 'H√©lico', keyATK: 'atk helico', keyDEF: 'def heli', icon: 'üöÅ' },
      { label: 'Drone', keyATK: 'atk drone', keyDEF: 'def drone', icon: 'üõ∏' },
      { label: 'Missile', keyATK: 'atk missile', keyDEF: 'def missile', icon: 'üöÄ' },
      { label: 'Bateau', keyATK: 'atk bateau', keyDEF: 'def bateau', icon: '‚öì' },
      { label: 'Sous-marin', keyATK: 'atk sous-marine', keyDEF: 'def sous-marine', icon: 'üåä' }
    ];
    
    // En-t√™te avec les cat√©gories en colonnes
    html += '<thead><tr style="background: linear-gradient(180deg, #34495e 0%, #2c3e50 100%);">';
    html += '<th style="padding: 15px 10px; text-align: center; color: #95a5a6; font-weight: 600; border-right: 1px solid #1a252f; min-width: 120px;">TYPE</th>';
    html += '<th style="padding: 15px 10px; text-align: center; color: #95a5a6; font-weight: 600; border-right: 1px solid #1a252f; min-width: 50px;"></th>';
    
    for (let cat of categories) {
      html += `<th style="padding: 15px 8px; text-align: center; border-right: 1px solid #1a252f; min-width: 70px;">
        <div style="color: #fbbf24; font-weight: 700; font-size: 11px; line-height: 1.3;">${cat.icon}<br>${cat.label}</div>
      </th>`;
    }
    html += '</tr></thead>';
    
    html += '<tbody>';
    
    // Initialiser les totaux
    const totaux = {};
    categories.forEach(cat => {
      totaux[cat.keyATK] = 0;
      totaux[cat.keyDEF] = 0;
    });
    
    // Deux lignes par type d'unit√© (ATK puis DEF)
    for (let i = 0; i < unitesSelectionnees.length; i++) {
      const lettre = String.fromCharCode(65 + i);
      const nomUnite = unitesSelectionnees[i];
      const niveau = niveauxRecherche[i];
      const quantite = quantitesParType[i];
      
      const statUnite = unitsData.find(u => {
        const lvlStr = (u["level 1√†10 ATK"] || '').toString();
        return u["Unit√©"] === nomUnite && (lvlStr.includes(`level ${niveau}`) || lvlStr === `level ${niveau}`);
      });
      
      // Ligne ATK
      html += `<tr style="background: ${i % 2 === 0 ? '#2c3e50' : '#283846'};">`;
      html += `<td rowspan="2" style="padding: 10px; border-right: 1px solid #1a252f; text-align: center; vertical-align: middle;">
        <div style="color: #fbbf24; font-weight: 700; font-size: 11px; margin-bottom: 4px;">TYPE ${lettre}</div>
        <div style="color: #ecf0f1; font-size: 10px; font-weight: 500; line-height: 1.3;">${nomUnite}</div>
        <div style="color: #7f8c8d; font-size: 9px; margin-top: 3px;">√ó${quantite} | Niv ${niveau}</div>
      </td>`;
      html += `<td style="padding: 8px 5px; border-right: 1px solid #1a252f; text-align: center; vertical-align: middle;">
        <div style="color: #e74c3c; font-size: 10px; font-weight: 700;">ATK</div>
      </td>`;
      
      for (let cat of categories) {
        if (statUnite && statUnite[cat.keyATK]) {
          const valeurUnit = parseFloat(statUnite[cat.keyATK]) || 0;
          const valeurTotal = (valeurUnit * quantite).toFixed(1);
          totaux[cat.keyATK] += parseFloat(valeurTotal);
          html += `<td style="padding: 8px 5px; text-align: center; border-right: 1px solid #1a252f;">
            <div style="color: #e74c3c; font-size: 13px; font-weight: 700;">${valeurTotal}</div>
          </td>`;
        } else {
          html += `<td style="padding: 8px 5px; text-align: center; color: #546e7a; border-right: 1px solid #1a252f;">-</td>`;
        }
      }
      html += '</tr>';
      
      // Ligne DEF
      html += `<tr style="background: ${i % 2 === 0 ? '#2c3e50' : '#283846'}; border-bottom: ${i === unitesSelectionnees.length - 1 ? '2px solid #1a252f' : '1.5px solid #1a252f'};">`;
      html += `<td style="padding: 8px 5px; border-right: 1px solid #1a252f; border-top: 1.5px solid #1a252f; text-align: center; vertical-align: middle;">
        <div style="color: #27ae60; font-size: 10px; font-weight: 700;">DEF</div>
      </td>`;
      
      for (let cat of categories) {
        if (statUnite && statUnite[cat.keyDEF]) {
          const valeurUnit = parseFloat(statUnite[cat.keyDEF]) || 0;
          const valeurTotal = (valeurUnit * quantite).toFixed(1);
          totaux[cat.keyDEF] += parseFloat(valeurTotal);
          html += `<td style="padding: 8px 5px; text-align: center; border-right: 1px solid #1a252f; border-top: 1.5px solid #1a252f;">
            <div style="color: #27ae60; font-size: 13px; font-weight: 700;">${valeurTotal}</div>
          </td>`;
        } else {
          html += `<td style="padding: 8px 5px; text-align: center; color: #546e7a; border-right: 1px solid #1a252f; border-top: 1.5px solid #1a252f;">-</td>`;
        }
      }
      html += '</tr>';
    }
    
    // Ligne Total ATK
    html += '<tr style="background: #34495e; border-top: 2px solid #1a252f;">';
    html += `<td rowspan="2" style="padding: 12px; border-right: 1px solid #1a252f; text-align: center; vertical-align: middle;">
      <div style="color: #fbbf24; font-weight: 700; font-size: 12px;">TOTAL</div>
    </td>`;
    html += `<td style="padding: 10px 5px; border-right: 1px solid #1a252f; text-align: center; vertical-align: middle;">
      <div style="color: #e74c3c; font-size: 11px; font-weight: 700;">ATK</div>
    </td>`;
    
    for (let cat of categories) {
      const total = totaux[cat.keyATK].toFixed(1);
      html += `<td style="padding: 10px 5px; text-align: center; border-right: 1px solid #1a252f;">
        <div style="color: #e74c3c; font-size: 16px; font-weight: 700;">${total}</div>
      </td>`;
    }
    html += '</tr>';
    
    // Ligne Total DEF
    html += '<tr style="background: #34495e;">';
    html += `<td style="padding: 10px 5px; border-right: 1px solid #1a252f; border-top: 1.5px solid #1a252f; text-align: center; vertical-align: middle;">
      <div style="color: #27ae60; font-size: 11px; font-weight: 700;">DEF</div>
    </td>`;
    
    for (let cat of categories) {
      const total = totaux[cat.keyDEF].toFixed(1);
      html += `<td style="padding: 10px 5px; text-align: center; border-right: 1px solid #1a252f; border-top: 1.5px solid #1a252f;">
        <div style="color: #27ae60; font-size: 16px; font-weight: 700;">${total}</div>
      </td>`;
    }
    html += '</tr>';
    
    html += '</tbody></table></div>';
    
    container.innerHTML = html;
    modal.style.display = 'block';
  }

  // Modal pour √©quipe d'admin
  const modal = document.getElementById('adminModal');
  const openBtn = document.getElementById('openAdminModal');
  const closeBtn = document.querySelector('.modal-close');

  if (openBtn) {
    openBtn.onclick = function(e) {
      e.preventDefault();
      modal.style.display = 'block';
    }
  }

    const statsModal = document.getElementById('statsModal');
    if (event.target == statsModal) {
      statsModal.style.display = 'none';
    }
  if (closeBtn) {
    closeBtn.onclick = function() {
      modal.style.display = 'none';
    const recapModal = document.getElementById('recapModal');
    if (event.target == recapModal) {
      recapModal.style.display = 'none';
    }
    }
  }

  window.onclick = function(event) {
    if (event.target == modal) {
      modal.style.display = 'none';
    }
  }

  // Gestion de l'acc√®s avec code
  function checkAccess() {
    const code = document.getElementById('accessCode').value;
    if (code === 'napoleon2025') {
      document.getElementById('accessOverlay').style.display = 'none';
      document.getElementById('mainContent').style.display = 'block';
      sessionStorage.setItem('outilsAccess', 'granted');
    } else {
      document.getElementById('accessError').style.display = 'block';
      document.getElementById('accessCode').value = '';
    }
  }

  document.getElementById('accessCode').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      checkAccess();
    }
  });

  window.addEventListener('load', function() {
    if (sessionStorage.getItem('outilsAccess') === 'granted') {
      document.getElementById('accessOverlay').style.display = 'none';
      document.getElementById('mainContent').style.display = 'block';
    }
  });

  // LE NOUVEAU SIMULATEUR SERA AJOUT√â ICI
</script>
</body>
</html>
